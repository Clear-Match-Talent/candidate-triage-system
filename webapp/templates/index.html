<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Candidate Triage System</title>
  <link rel="stylesheet" href="/static/design-system.css" />
  <link rel="stylesheet" href="/static/stepper.css" />
</head>
<body>
  <div class="page">
    <nav class="breadcrumbs">
      <ol>
        <li><strong>Home</strong></li>
      </ol>
    </nav>

    <h1>Candidate Triage System</h1>
    <p class="subtitle">Upload one or more CSV exports. The system will standardize + dedupe, run AI evaluation, and produce proceed/human_review/dismiss outputs.</p>

    {% include "components/stepper.html" %}

    <div class="card" id="run-form">
      <form action="/run" method="post" enctype="multipart/form-data">
        <label>Run name (optional)</label>
        <input type="text" name="run_name" placeholder="e.g., 2026-01-24_mandrel_founding-eng_nyc" />

        <label>Role label (optional)</label>
        <input type="text" name="role_label" placeholder="e.g., Mandrel â€” Founding Engineer (NYC)" />

        <label>CSV files</label>
        <input type="file" name="files" multiple accept=".csv" required />
        <div class="hint">Tip: You can upload multiple sources at once; ingestion will standardize + dedupe by LinkedIn URL.</div>

        <button type="submit" class="btn">Run</button>
      </form>
    </div>

    <h2 style="margin-top:24px;">Recent runs</h2>
    {% if recent|length > 0 %}
    <table>
      <thead>
        <tr><th>Run</th><th>Role</th><th>Status</th><th>Message</th></tr>
      </thead>
      <tbody>
      {% for r in recent %}
        <tr>
          <td><a href="/runs/{{ r.run_id }}">{{ r.run_name }}</a></td>
          <td>{{ r.role_label }}</td>
          <td><span class="pill {{ r.state }}">{{ r.state }}</span></td>
          <td>{{ r.message }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
    {% else %}
    <div class="empty-state">
      No runs yet. Start a run to see progress here.
      <div><a class="btn" href="#run-form">Start a run</a></div>
    </div>
    {% endif %}
  </div>

  <div id="toast-container" class="toast-container"></div>

  <script src="/static/ui.js"></script>
</body>
</html>
